<% layout('layout/boilerPlate') -%>
    <section class="container d-flex row p-5 ms-5">
        <% if(listings.length === 0) { %>
            <p>No Products Available</p>
        <% } else { %>
            <% for(let listing of listings) { %>
                <div class="col-md-3 col-sm-6 mb-3">
                    <div class="card h-100">
                        <img src="<%=listing.image%>" class="card-img-top mx-auto m-2" alt="image" style="height: 300px; object-fit: cover; width:200px;">
                        <!-- Adjusted height to 200px, you can modify as needed -->
                        <div class="card-body">
                            <h6 class="card-title">
                                <%=listing.name%>, In
                            </h6>
                            <p class="card-text text-secondary">
                                <%=listing.description.substring(0,70) %>...
                            </p>
                            <p class="card-text">
                                <b>&#8377;<%=listing.price %></b>
                            </p>
                        </div>
                        <div class="d-flex">
                            <% const secondsAgo = Math.floor((new Date() - new Date(listing.createdAt)) / 1000); %>
                            <% const hoursAgo = Math.floor(secondsAgo / 3600); %>
                            <% const minutesAgo = Math.floor(secondsAgo / 60); %>
                            <h6 class="ms-3">Posted on: &nbsp;
                                <% if (secondsAgo === 0 || secondsAgo === 1) { %>
                                    <h6 class="text-secondary">
                                        <%=secondsAgo%> second ago
                                    </h6>
                                <% } else if (secondsAgo < 60) { %>
                                    <h6 class="text-secondary">
                                        <%= secondsAgo %> seconds ago
                                    </h6>
                                <% } else if (minutesAgo === 0 || minutesAgo === 1) { %>
                                    <h6 class="text-secondary">
                                        <%=minutesAgo%> minute ago
                                    </h6>
                                <% } else if (minutesAgo < 60) { %>
                                    <h6 class="text-secondary">
                                        <%= minutesAgo %> minutes ago
                                    </h6>
                                <% } else if (hoursAgo === 0 || hoursAgo === 1) { %>
                                    <h6 class="text-secondary">
                                        <%= hoursAgo %> hour ago
                                    </h6>
                                <% } else if (hoursAgo < 24) { %>
                                    <h6 class="text-secondary">
                                        <%= hoursAgo %> hours ago
                                    </h6>
                                <% } else { %>
                                    <h6 class="text-secondary">
                                        <%= Math.floor(hoursAgo / 24) %> days ago
                                    </h6>
                                <% } %>
                            </h6>
                        </div>
                        <a href="/listing/<%=listing._id%>" class="btn btn-sm btn-primary m-2">View</a>
                    </div>
                </div>
            <% } %>
        <% } %>
    </section>
